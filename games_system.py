import random
from telebot import types

# --- ุฅุนุฏุงุฏุงุช ุงูุฃูุนุงุจ ูุงูุฃุณุนุงุฑ ูุงูุฌูุงุฆุฒ (ุงููุณุจ ุชููุต ุชุฏุฑูุฌูุงู) ---
GAMES_DATA = {
    # โช ุฃูุนุงุจ ุนุงุฏูุฉ (ุฌุงุฆุฒุฉ: 50ู)
    "ุนูุงุตู": {"buy": 200, "sell": 150, "win": 50, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุฑูุงุถุฉ": {"buy": 200, "sell": 150, "win": 50, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุฏูู": {"buy": 200, "sell": 150, "win": 50, "rank": "ุนุงุฏูุฉ โช", "type": "text"},
    "ุฐูุงุก": {"buy": 200, "sell": 150, "win": 50, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุชุญุฏู": {"buy": 200, "sell": 150, "win": 50, "rank": "ุนุงุฏูุฉ โช", "type": "text"},

    # ๐ข ุฃูุนุงุจ ููุชุงุฒุฉ (ุฌุงุฆุฒุฉ: 40ู)
    "ุฃููุงู": {"buy": 400, "sell": 250, "win": 40, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุฌุบุฑุงููุง": {"buy": 400, "sell": 250, "win": 40, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุชุงุฑูุฎ": {"buy": 400, "sell": 250, "win": 40, "rank": "ููุชุงุฒุฉ ๐ข", "type": "text"},
    "ุญููุงูุงุช": {"buy": 400, "sell": 250, "win": 40, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุณูุงุฑุงุช": {"buy": 400, "sell": 250, "win": 40, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},

    # ๐ต ุฃูุนุงุจ ูุงุฏุฑุฉ (ุฌุงุฆุฒุฉ: 30ู)
    "ุฃููู": {"buy": 700, "sell": 550, "win": 30, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ูุงุฑูุงุช": {"buy": 700, "sell": 550, "win": 30, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ุทุจ": {"buy": 700, "sell": 550, "win": 30, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "text"},
    "ูุถุงุก": {"buy": 700, "sell": 550, "win": 30, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ุนููู": {"buy": 700, "sell": 550, "win": 30, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},

    # ๐ฅ ุฃูุนุงุจ ุฃุณุทูุฑูุฉ (ุฌุงุฆุฒุฉ: 20ู)
    "ุจุฑูุฌุฉ": {"buy": 900, "sell": 600, "win": 20, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ููุฒูุงุก": {"buy": 900, "sell": 600, "win": 20, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "text"},
    "ููููุงุก": {"buy": 900, "sell": 600, "win": 20, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ุฃุฏุจ": {"buy": 900, "sell": 600, "win": 20, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ููุณูุฉ": {"buy": 900, "sell": 600, "win": 20, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},

    # โจ ุฃูุนุงุจ ููู ุงูุฃุณุทูุฑูุฉ (ุฌุงุฆุฒุฉ: 10ู)
    "ููุฑ": {"buy": 2000, "sell": 1000, "win": 10, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "buttons"},
    "ููุทู": {"buy": 2000, "sell": 1000, "win": 10, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "text"},
    "ุญุถุงุฑุงุช": {"buy": 2000, "sell": 1000, "win": 10, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "buttons"},

    # ๐ ุฃูุนุงุจ ุฅูุจุฑุงุทูุฑูุฉ (ุฌุงุฆุฒุฉ: 5ู - ุตุนูุจุฉ ูุตูู)
    "ุงูุฅูุจุฑุงุทูุฑ": {"buy": 5000, "sell": 0, "win": 5, "rank": "ุฅูุจุฑุงุทูุฑูุฉ ๐", "type": "buttons"},
    "ุงูุบุงุฒ_ุตุนุจุฉ": {"buy": 5000, "sell": 0, "win": 5, "rank": "ุฅูุจุฑุงุทูุฑูุฉ ๐", "type": "text"}
}

# --- ุงุฎุชูุงุฑ 5 ุฃูุนุงุจ ูุฌุงููุฉ ุจุดูู ุนุดูุงุฆู ุนูุฏ ุงูุชุดุบูู ---
RANDOM_FREE_GAMES = random.sample(list(GAMES_DATA.keys()), 5)

# --- ุจูู ุงูุฃุณุฆูุฉ (ุชู ุชุฌููุฒ ุนููุฉ ุงุญุชุฑุงููุฉ ูู 10 ุฃุณุฆูุฉ ููู ูุนุจุฉ) ---
QUESTIONS = {}
for game in GAMES_DATA.keys():
    # ููุง ูุชู ููุก 10 ุฃุณุฆูุฉ ููู ูุนุจุฉ ุชููุงุฆูุงู (ููููู ุงุณุชุจุฏุงููุง ุจุฃุณุฆูุฉ ูุฏููุฉ ูุงุญูุงู)
    QUESTIONS[game] = [
        {"q": f"ุณุคุงู ุฐูุงุก ูู {game} - ุงููุฑุญูุฉ {i}ุ", "o": ["ุฃ", "ุจ", "ุฌ"], "a": "ุฃ"} for i in range(1, 11)
    ]

# ุชุฎุตูุต ุฃูุซูุฉ ุญููููุฉ ูุจุนุถ ุงูุฃูุนุงุจ
QUESTIONS["ุนูุงุตู"][0] = {"q": "ุนุงุตูุฉ ูุฑูุณุงุ", "o": ["ุจุงุฑูุณ", "ููุฏู", "ุฑููุง"], "a": "ุจุงุฑูุณ"}
QUESTIONS["ุฏูู"][0] = {"q": "ูู ุนุฏุฏ ุณูุฑ ุงููุฑุขู ุงููุฑููุ", "a": "114"}

def get_games_menu(unlocked_list):
    txt = "๐ญ <b>ุฅูุจุฑุงุทูุฑูุฉ ุงูุฃูุนุงุจ</b> ๐ญ\n"
    txt += "โฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏ\n"
    for name, info in GAMES_DATA.items():
        # ุงููุนุจุฉ ููุชูุญุฉ ุฅุฐุง ูุงูุช ูู ุงููุงุฆูุฉ ุฃู ุชู ุงุฎุชูุงุฑูุง ุนุดูุงุฆูุงู ููุฌุงููุฉ
        status = "๐" if (name in unlocked_list or name in RANDOM_FREE_GAMES) else "๐"
        txt += f"{status} <b>{name}</b> | {info['rank']}\n"
        txt += f"๐ฐ ุงูุฑุจุญ: {info['win']}ู | ุงูุดุฑุงุก: {info['buy']}ู\n\n"
    txt += f"โจ <u>ููุงุญุธุฉ:</u> ููุงู 5 ุฃูุนุงุจ ูุฌุงููุฉ ุนุดูุงุฆูุฉ ุงูุขู!\n"
    return txt

def start_game_logic(bot, message, game_name):
    q_data = random.choice(QUESTIONS[game_name])
    reward = GAMES_DATA[game_name]["win"]
    
    if GAMES_DATA[game_name]["type"] == "buttons":
        markup = types.InlineKeyboardMarkup()
        for opt in q_data["o"]:
            markup.add(types.InlineKeyboardButton(opt, callback_data=f"ans|{opt}|{q_data['a']}|{reward}"))
        bot.send_message(message.chat.id, f"๐น๏ธ <b>ูุนุจุฉ {game_name}:</b>\n\nโ {q_data['q']}", reply_markup=markup)
    else:
        bot.send_message(message.chat.id, f"๐ <b>ูุนุจุฉ {game_name}:</b>\n\nโ {q_data['q']}\n\n(ุฃุฑุณู ุงูุฅุฌุงุจุฉ ุจุงูุฑุฏ)")
