import random
from telebot import types

# --- ุฅุนุฏุงุฏุงุช ุงูุฃูุนุงุจ ูุงูุฃุณุนุงุฑ (25 ูุนุจุฉ) ---
GAMES_DATA = {
    # โช ุฃูุนุงุจ ุนุงุฏูุฉ (ุดุฑุงุก 200 - ุจูุน 150)
    "ุนูุงุตู": {"buy": 200, "sell": 150, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุฑูุงุถุฉ": {"buy": 200, "sell": 150, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุฏูู": {"buy": 200, "sell": 150, "rank": "ุนุงุฏูุฉ โช", "type": "text"},
    "ุฐูุงุก": {"buy": 200, "sell": 150, "rank": "ุนุงุฏูุฉ โช", "type": "buttons"},
    "ุชุญุฏู": {"buy": 200, "sell": 150, "rank": "ุนุงุฏูุฉ โช", "type": "text"},

    # ๐ข ุฃูุนุงุจ ููุชุงุฒุฉ (ุดุฑุงุก 400 - ุจูุน 250)
    "ุฃููุงู": {"buy": 400, "sell": 250, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุฌุบุฑุงููุง": {"buy": 400, "sell": 250, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุชุงุฑูุฎ": {"buy": 400, "sell": 250, "rank": "ููุชุงุฒุฉ ๐ข", "type": "text"},
    "ุญููุงูุงุช": {"buy": 400, "sell": 250, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},
    "ุณูุงุฑุงุช": {"buy": 400, "sell": 250, "rank": "ููุชุงุฒุฉ ๐ข", "type": "buttons"},

    # ๐ต ุฃูุนุงุจ ูุงุฏุฑุฉ (ุดุฑุงุก 700 - ุจูุน 550)
    "ุฃููู": {"buy": 700, "sell": 550, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ูุงุฑูุงุช": {"buy": 700, "sell": 550, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ุทุจ": {"buy": 700, "sell": 550, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "text"},
    "ูุถุงุก": {"buy": 700, "sell": 550, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},
    "ุนููู": {"buy": 700, "sell": 550, "rank": "ูุงุฏุฑุฉ ๐ต", "type": "buttons"},

    # ๐ฅ ุฃูุนุงุจ ุฃุณุทูุฑูุฉ (ุดุฑุงุก 900 - ุจูุน 600)
    "ุจุฑูุฌุฉ": {"buy": 900, "sell": 600, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ููุฒูุงุก": {"buy": 900, "sell": 600, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "text"},
    "ููููุงุก": {"buy": 900, "sell": 600, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ุฃุฏุจ": {"buy": 900, "sell": 600, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},
    "ููุณูุฉ": {"buy": 900, "sell": 600, "rank": "ุฃุณุทูุฑูุฉ ๐ฅ", "type": "buttons"},

    # โจ ุฃูุนุงุจ ููู ุงูุฃุณุทูุฑูุฉ (ุดุฑุงุก 2000 - ุจูุน 1000)
    "ููุฑ": {"buy": 2000, "sell": 1000, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "buttons"},
    "ููุทู": {"buy": 2000, "sell": 1000, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "text"},
    "ุญุถุงุฑุงุช": {"buy": 2000, "sell": 1000, "rank": "ููู ุงูุฃุณุทูุฑูุฉ โจ", "type": "buttons"},

    # ๐ ุฃูุนุงุจ ุฅูุจุฑุงุทูุฑูุฉ (ุดุฑุงุก 5000 - ูุง ุชุจุงุน)
    "ุงูุฅูุจุฑุงุทูุฑ": {"buy": 5000, "sell": 0, "rank": "ุฅูุจุฑุงุทูุฑูุฉ ๐", "type": "buttons"},
    "ุงูุบุงุฒ_ุตุนุจุฉ": {"buy": 5000, "sell": 0, "rank": "ุฅูุจุฑุงุทูุฑูุฉ ๐", "type": "text"}
}

# --- ุจูู ุงูุฃุณุฆูุฉ ุงูุดุงูู (ุนููุฉ ูู 200 ุณุคุงู) ---
QUESTIONS = {
    "ุนูุงุตู": [
        {"q": "ูุง ูู ุนุงุตูุฉ ุงูุนุฑุงูุ", "o": ["ุจุบุฏุงุฏ", "ุฃุฑุจูู", "ุงูุจุตุฑุฉ"], "a": "ุจุบุฏุงุฏ"},
        {"q": "ูุง ูู ุนุงุตูุฉ ุงููุงุจุงูุ", "o": ["ุทูููู", "ุฃูุณุงูุง", "ูููุชู"], "a": "ุทูููู"},
        # ... ุชูููุฉ ุงูู 15 ุณุคุงูุงู ุจููุณ ุงูููุท
    ],
    "ุฏูู": [
        {"q": "ูุง ูู ุฃุทูู ุณูุฑุฉ ูู ุงููุฑุขูุ", "a": "ุงูุจูุฑุฉ"},
        {"q": "ูู ูู ุฃูู ูุคุฐู ูู ุงูุฅุณูุงูุ", "a": "ุจูุงู ุจู ุฑุจุงุญ"},
    ],
    "ุฃููู": [
        {"q": "ูู ูู ุจุทู ุฃููู ูู ุจูุณุ", "o": ["ูููู", "ุฒูุฑู", "ุณุงูุฌู"], "a": "ูููู"},
    ],
    # ุณูุชู ุชูุฑุงุฑ ูุฐุง ุงููููู ููู ุงูู 25 ูุนุจุฉ ูุถูุงู ูุฌูุฏ 15 ุณุคุงูุงู ููู ูููุง
}

# ูุธููุฉ ุชูููุฏ ุงูุฃุณุฆูุฉ ุงููุงูุตุฉ ุชููุงุฆูุงู ูุถูุงู ุนุฏู ุชููู ุงูููุฏ
for g in GAMES_DATA.keys():
    if g not in QUESTIONS:
        QUESTIONS[g] = [{"q": f"ุณุคุงู ูู {g} ุฑูู {i}ุ", "o": ["ุฅุฌุงุจุฉ 1", "ุฅุฌุงุจุฉ 2", "ุฅุฌุงุจุฉ 3"], "a": "ุฅุฌุงุจุฉ 1"} for i in range(1, 16)]

# --- ูุธุงุฆู ุงููุงุฌูุฉ ุงูุฑุณูููุฉ ููุฃูุนุงุจ ---
def get_games_menu(unlocked_list):
    """ุนุฑุถ ูุงุฆูุฉ ุงูุฃูุนุงุจ ุงููุฒุฎุฑูุฉ ูุน ุญุงูุฉ ุงูููู"""
    txt = "๐ญ <b>ุฅูุจุฑุงุทูุฑูุฉ ุงูุฃูุนุงุจ</b> ๐ญ\n"
    txt += "โฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏ\n"
    for name, info in GAMES_DATA.items():
        icon = "๐" if name in unlocked_list else "๐"
        txt += f"{icon} <b>{name}</b> โซ {info['rank']}\n"
        sell_txt = f"{info['sell']}ู" if info['sell'] > 0 else "ุบูุฑ ูุงุจูุฉ ููุจูุน"
        txt += f"   ๐ฐ ุดุฑุงุก: <code>{info['buy']}</code> | ุจูุน: <code>{sell_txt}</code>\n"
    txt += "โฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏโฏ\n"
    txt += "๐ก ุฃุฑุณู ุงุณู ุงููุนุจุฉ ููุจุฏุก ุฃู 'ุดุฑุงุก/ุจูุน ุงุณู ุงููุนุจุฉ'"
    return txt

def start_game_logic(bot, message, game_name):
    """ุจุฏุก ุชุดุบูู ุงููุนุจุฉ ุงููุฎุชุงุฑุฉ ุจูุงุกู ุนูู ููุนูุง (ุฃุฒุฑุงุฑ ุฃู ูุต)"""
    q_data = random.choice(QUESTIONS[game_name])
    
    if GAMES_DATA[game_name]["type"] == "buttons":
        markup = types.InlineKeyboardMarkup()
        for opt in q_data["o"]:
            markup.add(types.InlineKeyboardButton(opt, callback_data=f"ans|{opt}|{q_data['a']}"))
        bot.send_message(message.chat.id, f"๐ฎ <b>ูุนุจุฉ {game_name}:</b>\n\nโ {q_data['q']}", reply_markup=markup)
    else:
        msg = bot.send_message(message.chat.id, f"๐ฎ <b>ูุนุจุฉ {game_name}:</b>\n\nโ {q_data['q']}\n\n(ุฃุฑุณู ุงูุฅุฌุงุจุฉ ุจุงูุฑุฏ ุนูู ูุฐู ุงูุฑุณุงูุฉ)")
        # ุณูุชู ุงูุชุนุงูู ูุน ุงูุฑุฏ ูู ููู main.py ุนุจุฑ register_next_step_handler
        return q_data['a']

